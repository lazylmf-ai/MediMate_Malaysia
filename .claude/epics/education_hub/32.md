---
name: Interactive Learning System
status: open
created: 2025-10-01T11:05:51Z
updated: 2025-10-02T06:48:02Z
github: https://github.com/lazylmf-ai/MediMate_Malaysia/issues/32
depends_on: [30, 31]
parallel: true
conflicts_with: []
---

# Task 033: Interactive Learning System

## Description

Implement the interactive learning features including quiz system, progress tracking dashboard, and gamification elements (badges, achievements, streaks). This task adds engagement and motivation mechanics on top of the content infrastructure from Task 031 and UI from Task 032.

**Scope:**
- Interactive quiz interface with multiple-choice questions
- Real-time quiz scoring and feedback
- Learning progress dashboard with visualizations
- Gamification system (badges, achievements, streaks)
- Progress tracking and analytics
- Achievement celebrations and notifications

## Acceptance Criteria

- [ ] Quiz screen displays questions with multiple-choice options
- [ ] Quiz answers are validated and scored in real-time
- [ ] Quiz results screen shows score, correct answers, and explanations
- [ ] Retry functionality allows users to retake quizzes
- [ ] Learning progress dashboard shows stats (content viewed, quizzes completed, streaks)
- [ ] Achievements/badges are awarded automatically based on milestones
- [ ] Achievement notifications appear when badges are earned
- [ ] Streak tracking (consecutive days with learning activity) working
- [ ] Progress visualizations (charts, progress bars) render correctly
- [ ] Users can view all earned badges and locked badges
- [ ] Share achievements with family circle integration
- [ ] Gamification motivates users without feeling childish (elderly-appropriate)

## Technical Details

### Quiz System

**Quiz Screen Implementation:**
```tsx
// frontend/src/screens/education/QuizScreen.tsx
interface QuizScreenProps {
  route: { params: { quizId: string } };
  navigation: any;
}

export const QuizScreen: React.FC<QuizScreenProps> = ({ route, navigation }) => {
  const { quizId } = route.params;
  const [quiz, setQuiz] = useState<Quiz | null>(null);
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState<Record<number, string>>({});
  const [showResults, setShowResults] = useState(false);

  const handleAnswerSelect = (questionIndex: number, answerId: string) => {
    setAnswers({ ...answers, [questionIndex]: answerId });
  };

  const handleSubmit = async () => {
    // Submit to backend for scoring
    const result = await quizService.submitQuiz(quizId, answers);

    // Check for new achievements
    const newBadges = await gamificationService.checkAchievements();

    // Show results
    setShowResults(true);

    // Award badges if any
    if (newBadges.length > 0) {
      showAchievementModal(newBadges);
    }
  };

  return (
    <View>
      {!showResults ? (
        <>
          {/* Question progress indicator */}
          <ProgressIndicator current={currentQuestion + 1} total={quiz.questions.length} />

          {/* Question */}
          <QuizQuestion
            question={quiz.questions[currentQuestion]}
            selectedAnswer={answers[currentQuestion]}
            onAnswerSelect={(answerId) => handleAnswerSelect(currentQuestion, answerId)}
          />

          {/* Navigation */}
          <View style={styles.navigation}>
            {currentQuestion > 0 && (
              <Button title="Previous" onPress={() => setCurrentQuestion(currentQuestion - 1)} />
            )}
            {currentQuestion < quiz.questions.length - 1 ? (
              <Button title="Next" onPress={() => setCurrentQuestion(currentQuestion + 1)} />
            ) : (
              <Button title="Submit Quiz" onPress={handleSubmit} />
            )}
          </View>
        </>
      ) : (
        <QuizResultsScreen quizId={quizId} score={result.score} />
      )}
    </View>
  );
};
```

**Quiz Question Component:**
```tsx
// frontend/src/components/education/QuizQuestion.tsx
interface QuizQuestionProps {
  question: Question;
  selectedAnswer?: string;
  onAnswerSelect: (answerId: string) => void;
  showCorrectAnswer?: boolean; // For results view
}

export const QuizQuestion: React.FC<QuizQuestionProps> = ({
  question,
  selectedAnswer,
  onAnswerSelect,
  showCorrectAnswer = false
}) => {
  return (
    <View style={styles.container}>
      {/* Question text */}
      <Text style={styles.questionText}>{question.text}</Text>

      {/* Answer options */}
      {question.options.map((option) => (
        <TouchableOpacity
          key={option.id}
          style={[
            styles.option,
            selectedAnswer === option.id && styles.selectedOption,
            showCorrectAnswer && option.isCorrect && styles.correctOption,
            showCorrectAnswer && selectedAnswer === option.id && !option.isCorrect && styles.wrongOption
          ]}
          onPress={() => onAnswerSelect(option.id)}
          disabled={showCorrectAnswer}
        >
          <Text style={styles.optionText}>{option.text}</Text>
          {showCorrectAnswer && option.isCorrect && <CheckIcon />}
        </TouchableOpacity>
      ))}

      {/* Explanation (shown after answer) */}
      {showCorrectAnswer && (
        <View style={styles.explanation}>
          <Text style={styles.explanationTitle}>Explanation:</Text>
          <Text style={styles.explanationText}>{question.explanation}</Text>
        </View>
      )}
    </View>
  );
};
```

### Progress Dashboard

**Learning Progress Screen:**
```tsx
// frontend/src/screens/education/LearningProgressScreen.tsx
export const LearningProgressScreen: React.FC = () => {
  const { userProgress, achievements, loading } = useSelector(state => state.education);

  useEffect(() => {
    dispatch(fetchUserProgress());
    dispatch(fetchAchievements());
  }, []);

  return (
    <ScrollView>
      {/* Overview stats cards */}
      <StatsOverview
        contentViewed={userProgress.contentViewed}
        quizzesCompleted={userProgress.quizzesCompleted}
        currentStreak={userProgress.currentStreak}
        totalPoints={userProgress.totalPoints}
      />

      {/* Learning streak calendar */}
      <StreakCalendar streak={userProgress.currentStreak} />

      {/* Progress by category chart */}
      <CategoryProgressChart categories={userProgress.categoryProgress} />

      {/* Achievements/Badges */}
      <AchievementGrid achievements={achievements} />

      {/* Recent activity */}
      <RecentActivityList activities={userProgress.recentActivity} />
    </ScrollView>
  );
};
```

**Stats Overview Component:**
```tsx
// frontend/src/components/education/StatsOverview.tsx
interface StatsOverviewProps {
  contentViewed: number;
  quizzesCompleted: number;
  currentStreak: number;
  totalPoints: number;
}

export const StatsOverview: React.FC<StatsOverviewProps> = ({
  contentViewed,
  quizzesCompleted,
  currentStreak,
  totalPoints
}) => {
  return (
    <View style={styles.container}>
      <StatCard
        icon={<BookIcon />}
        value={contentViewed}
        label="Content Viewed"
        color="#2196F3"
      />
      <StatCard
        icon={<QuizIcon />}
        value={quizzesCompleted}
        label="Quizzes Passed"
        color="#4CAF50"
      />
      <StatCard
        icon={<FireIcon />}
        value={currentStreak}
        label="Day Streak"
        color="#FF9800"
      />
      <StatCard
        icon={<StarIcon />}
        value={totalPoints}
        label="Total Points"
        color="#9C27B0"
      />
    </View>
  );
};
```

### Gamification System

**Achievement Badges:**
```typescript
// frontend/src/services/gamificationService.ts
const ACHIEVEMENT_DEFINITIONS = {
  first_content: {
    id: 'first_content',
    name: { ms: 'Pemula', en: 'First Steps', zh: 'åˆå­¦è€…', ta: 'à®®à¯à®¤à®²à¯ à®ªà®Ÿà®¿' },
    description: { ms: 'Lihat kandungan pertama', en: 'View your first content', zh: 'æŸ¥çœ‹æ‚¨çš„ç¬¬ä¸€ä¸ªå†…å®¹', ta: 'à®‰à®™à¯à®•à®³à¯ à®®à¯à®¤à®²à¯ à®‰à®³à¯à®³à®Ÿà®•à¯à®•à®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¾à®°à¯à®•à¯à®•à®µà¯à®®à¯' },
    icon: 'ðŸŒ±',
    condition: (progress) => progress.contentViewed >= 1
  },
  learner_10: {
    id: 'learner_10',
    name: { ms: 'Pelajar', en: 'Learner', zh: 'å­¦ä¹ è€…', ta: 'à®•à®±à¯à®±à¯à®•à¯à®•à¯Šà®³à¯à®ªà®µà®°à¯' },
    description: { ms: 'Selesai 10 kandungan', en: 'Complete 10 content pieces', zh: 'å®Œæˆ10ä¸ªå†…å®¹', ta: '10 à®‰à®³à¯à®³à®Ÿà®•à¯à®•à®™à¯à®•à®³à¯ˆ à®®à¯à®Ÿà®¿à®•à¯à®•à®µà¯à®®à¯' },
    icon: 'ðŸ“š',
    condition: (progress) => progress.completedContent >= 10
  },
  quiz_master: {
    id: 'quiz_master',
    name: { ms: 'Pakar Kuiz', en: 'Quiz Master', zh: 'æµ‹éªŒå¤§å¸ˆ', ta: 'à®µà®¿à®©à®¾à®Ÿà®¿ à®µà®¿à®©à®¾ à®µà®²à¯à®²à¯à®¨à®°à¯' },
    description: { ms: 'Lulus 5 kuiz', en: 'Pass 5 quizzes', zh: 'é€šè¿‡5æ¬¡æµ‹éªŒ', ta: '5 à®µà®¿à®©à®¾à®Ÿà®¿ à®µà®¿à®©à®¾à®•à¯à®•à®³à®¿à®²à¯ à®¤à¯‡à®°à¯à®šà¯à®šà®¿ à®ªà¯†à®±à®µà¯à®®à¯' },
    icon: 'ðŸŽ“',
    condition: (progress) => progress.quizzesPassed >= 5
  },
  '7_day_streak': {
    id: '7_day_streak',
    name: { ms: 'Komited 7 Hari', en: '7-Day Streak', zh: '7å¤©è¿žç»­', ta: '7 à®¨à®¾à®³à¯ à®¤à¯Šà®Ÿà®°à¯à®šà¯à®šà®¿' },
    description: { ms: 'Belajar 7 hari berturut-turut', en: 'Learn 7 days in a row', zh: 'è¿žç»­7å¤©å­¦ä¹ ', ta: 'à®¤à¯Šà®Ÿà®°à¯à®¨à¯à®¤à¯ 7 à®¨à®¾à®Ÿà¯à®•à®³à¯ à®•à®±à¯à®±à¯à®•à¯à®•à¯Šà®³à¯à®³à®µà¯à®®à¯' },
    icon: 'ðŸ”¥',
    condition: (progress) => progress.currentStreak >= 7
  },
  diabetes_expert: {
    id: 'diabetes_expert',
    name: { ms: 'Pakar Diabetes', en: 'Diabetes Expert', zh: 'ç³–å°¿ç—…ä¸“å®¶', ta: 'à®¨à¯€à®°à®¿à®´à®¿à®µà¯ à®µà®²à¯à®²à¯à®¨à®°à¯' },
    description: { ms: 'Selesai semua modul diabetes', en: 'Complete all diabetes modules', zh: 'å®Œæˆæ‰€æœ‰ç³–å°¿ç—…æ¨¡å—', ta: 'à®…à®©à¯ˆà®¤à¯à®¤à¯ à®¨à¯€à®°à®¿à®´à®¿à®µà¯ à®¤à¯Šà®•à¯à®¤à®¿à®•à®³à¯ˆà®¯à¯à®®à¯ à®®à¯à®Ÿà®¿à®•à¯à®•à®µà¯à®®à¯' },
    icon: 'ðŸ’™',
    condition: (progress) => progress.diabetesModulesCompleted >= 10
  },
  // ... more achievements
};

class GamificationService {
  async checkAchievements(userId: string): Promise<Badge[]> {
    const userProgress = await this.getUserProgress(userId);
    const earnedAchievements = await this.getEarnedAchievements(userId);
    const newBadges: Badge[] = [];

    // Check each achievement definition
    for (const [key, achievement] of Object.entries(ACHIEVEMENT_DEFINITIONS)) {
      // Skip if already earned
      if (earnedAchievements.includes(key)) continue;

      // Check if condition met
      if (achievement.condition(userProgress)) {
        // Award badge
        await this.awardBadge(userId, key);
        newBadges.push({
          id: key,
          name: achievement.name,
          description: achievement.description,
          icon: achievement.icon,
          earnedAt: new Date()
        });
      }
    }

    return newBadges;
  }

  async trackLearningActivity(userId: string): Promise<void> {
    // Update daily activity
    await this.recordDailyActivity(userId);

    // Update streak
    await this.updateStreak(userId);

    // Check for streak achievements
    await this.checkAchievements(userId);
  }
}
```

**Achievement Celebration Modal:**
```tsx
// frontend/src/components/education/AchievementModal.tsx
interface AchievementModalProps {
  badge: Badge;
  visible: boolean;
  onClose: () => void;
}

export const AchievementModal: React.FC<AchievementModalProps> = ({
  badge,
  visible,
  onClose
}) => {
  const language = useSelector(state => state.app.language);

  return (
    <Modal visible={visible} transparent animationType="fade">
      <View style={styles.overlay}>
        <View style={styles.modal}>
          {/* Celebration animation */}
          <LottieView source={require('@/assets/animations/confetti.json')} autoPlay loop={false} />

          {/* Badge icon */}
          <Text style={styles.badgeIcon}>{badge.icon}</Text>

          {/* Badge name */}
          <Text style={styles.badgeName}>{badge.name[language]}</Text>

          {/* Description */}
          <Text style={styles.description}>{badge.description[language]}</Text>

          {/* Share button */}
          <Button
            title="Share with Family"
            onPress={() => shareAchievement(badge)}
          />

          {/* Close button */}
          <Button title="Continue Learning" onPress={onClose} />
        </View>
      </View>
    </Modal>
  );
};
```

### Files to Create/Modify

**Frontend:**
```
frontend/src/
â”œâ”€â”€ screens/education/
â”‚   â”œâ”€â”€ QuizScreen.tsx
â”‚   â”œâ”€â”€ QuizResultsScreen.tsx
â”‚   â””â”€â”€ LearningProgressScreen.tsx
â”œâ”€â”€ components/education/
â”‚   â”œâ”€â”€ QuizQuestion.tsx
â”‚   â”œâ”€â”€ ProgressIndicator.tsx
â”‚   â”œâ”€â”€ StatsOverview.tsx
â”‚   â”œâ”€â”€ StatCard.tsx
â”‚   â”œâ”€â”€ StreakCalendar.tsx
â”‚   â”œâ”€â”€ CategoryProgressChart.tsx
â”‚   â”œâ”€â”€ AchievementGrid.tsx
â”‚   â”œâ”€â”€ AchievementBadge.tsx
â”‚   â”œâ”€â”€ AchievementModal.tsx
â”‚   â””â”€â”€ RecentActivityList.tsx
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ quizService.ts
â”‚   â””â”€â”€ gamificationService.ts
â””â”€â”€ store/slices/
    â””â”€â”€ educationSlice.ts (extend with quiz/progress actions)
```

**Backend (extend Task 031):**
```
backend/src/services/education/
â””â”€â”€ GamificationService.ts
```

## Dependencies

**External:**
- [ ] Task 031 Quiz API endpoints (submit, score)
- [ ] Task 031 Progress tracking API
- [ ] Task 031 Achievements API
- [ ] Task 032 UI foundation (screens, navigation)

**Internal:**
- [ ] Existing Redux store
- [ ] Existing notification system (for achievement alerts)
- [ ] Existing family circle API (for achievement sharing - Task 035)

## Effort Estimate

- **Size:** M (Medium)
- **Hours:** 40 hours
- **Breakdown:**
  - Quiz system UI: 12 hours
  - Progress dashboard: 12 hours
  - Gamification logic: 10 hours
  - Animations and celebrations: 6 hours
- **Parallel:** true (can work after Task 031 quiz API and Task 032 UI foundation complete)

## Definition of Done

- [ ] Quiz system fully functional (questions, answers, scoring)
- [ ] Quiz results show correct/incorrect answers with explanations
- [ ] Progress dashboard displays all user statistics
- [ ] Achievements automatically awarded based on milestones
- [ ] Achievement celebration modal appears for new badges
- [ ] Streak tracking updates daily
- [ ] Progress visualizations (charts) render correctly
- [ ] Component tests written (>70% coverage)
- [ ] Quiz logic tested with various scenarios
- [ ] Achievement conditions tested
- [ ] Code reviewed and approved
- [ ] Tested on iOS and Android devices
- [ ] Merged to development branch

## Testing Requirements

**Component Tests:**
- QuizQuestion renders options correctly
- Quiz scoring logic accurate
- Achievement conditions trigger correctly
- Progress calculations correct

**Integration Tests:**
- Full quiz flow (start â†’ answer â†’ submit â†’ results)
- Achievement unlocking workflow
- Progress dashboard data loading
- Streak tracking logic

**Manual Testing:**
- Quiz on slow connections (save progress)
- Achievement celebration animations
- Progress dashboard with various data states
- Elderly user testing (clear feedback, large touch targets)
